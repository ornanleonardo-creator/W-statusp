<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>W STATUS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
 margin:0;
 font-family:Arial, sans-serif;
 background:#ece5dd;
}

header{
 background:#075E54;
 color:white;
 padding:12px;
 text-align:center;
 font-size:20px;
}

.controls{
 display:flex;
 gap:5px;
 padding:10px;
 background:#f0f0f0;
}

select{
 flex:1;
 padding:8px;
 border-radius:5px;
 border:none;
}

#list{
 padding:10px;
}

.card{
 background:white;
 margin-bottom:12px;
 padding:8px;
 border-radius:10px;
 box-shadow:0 2px 5px rgba(0,0,0,.1);
 animation:pop .2s ease;
}

.card img, .card video{
 width:100%;
 border-radius:10px;
}

.actions{
 display:flex;
 justify-content:space-around;
 margin-top:8px;
}

.actions button{
 background:#25D366;
 border:none;
 padding:8px 12px;
 border-radius:20px;
 color:white;
 font-size:14px;
}

@keyframes pop{
 from{transform:scale(.95);opacity:0}
 to{transform:scale(1);opacity:1}
}
</style>
</head>

<body>

<header>W STATUS</header>

<div class="controls">
<select id="type">
 <option value="Images">Images</option>
 <option value="Videos">VidÃ©os</option>
</select>

<select id="genre">
 <option value="">Tous les genres</option>
 <option>Amour</option>
 <option>Motivation</option>
 <option>Fun</option>
 <option>Triste</option>
</select>
</div>

<div id="list"></div>

<script>
const DATA_URL="https://raw.githubusercontent.com/ornanleonardo-creator/W-statusp/main/status.json";

let data={}, current=[];

fetch(DATA_URL)
 .then(r=>r.json())
 .then(j=>{
   data=j;
   load();
 });

function load(){
 current=data[type.value];
 render(current);
}

type.onchange=load;

genre.onchange=()=>{
 let g=genre.value;
 if(!g) render(current);
 else render(current.filter(x=>x.genre===g));
}

function render(arr){
 list.innerHTML="";
 arr.forEach(i=>{
  let c=document.createElement("div");
  c.className="card";

  if(i.type==="image"){
   c.innerHTML=`
    <img src="${i.content}">
    <div class="actions">
     <button onclick="share('${i.content}')">âž—</button>
     <button onclick="saveFile('${i.content}')">ðŸ’š</button>
     <button onclick="fav('${i.content}')">ðŸ–¤</button>
    </div>`;
  }else{
   c.innerHTML=`
    <video controls src="${i.content}"></video>
    <div class="actions">
     <button onclick="share('${i.content}')">âž—</button>
     <button onclick="saveFile('${i.content}')">ðŸ’š</button>
     <button onclick="fav('${i.content}')">ðŸ–¤</button>
    </div>`;
  }
  list.appendChild(c);
 });
}

function share(url){
 if(navigator.share){
  navigator.share({url});
 }else{
  window.open("https://wa.me/?text="+encodeURIComponent(url));
 }
}

function saveFile(url){
 let a=document.createElement("a");
 a.href=url;
 a.download="";
 document.body.appendChild(a);
 a.click();
 document.body.removeChild(a);
}

function fav(url){
 let f=JSON.parse(localStorage.getItem("fav")||"[]");
 if(!f.includes(url)){
  f.push(url);
  localStorage.setItem("fav",JSON.stringify(f));
  alert("AjoutÃ© aux favoris ðŸ–¤");
 }
}
</script>

</body>
</html>
