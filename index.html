<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>W Status</title>

<style>
body{margin:0;font-family:Arial;background:#ece5dd}
header{background:#075E54;color:white;padding:15px;text-align:center;font-size:20px;font-weight:bold}
select,input{width:92%;margin:8px auto;display:block;padding:10px;border-radius:6px;border:0}
#tabs{display:flex;background:#075E54}
#tabs button{flex:1;padding:10px;border:0;background:#075E54;color:white;font-weight:bold}
#tabs button.active{background:#128C7E}
.card{background:#dcf8c6;margin:10px;padding:10px;border-radius:10px}
.card img,.card video{width:100%;border-radius:10px}
.actions{display:flex;gap:6px;margin-top:6px}
.actions button{flex:1;background:#25D366;border:0;padding:8px;border-radius:6px;font-weight:bold}
</style>
</head>

<body>

<header>W STATUS</header>

<div id="tabs">
  <button class="active" onclick="showTab('all',this)">üì± Statuts</button>
  <button onclick="showTab('fav',this)">‚ù§Ô∏è Favoris</button>
</div>

<select id="cat"></select>
<input id="search" placeholder="Rechercher...">

<div id="list"></div>

<script>
const URL="https://raw.githubusercontent.com/ornanleonardo-creator/W-statusp/main/status.json";
let data={},current=[],favoris=JSON.parse(localStorage.getItem("fav")||"[]"),tab="all";

fetch(URL).then(r=>r.json()).then(j=>{
 data=j;
 for(let c in data) cat.innerHTML+=`<option>${c}</option>`;
 load(cat.value);
});

cat.onchange=e=>load(e.target.value);

search.oninput=e=>{
 let v=e.target.value.toLowerCase();
 render(current.filter(x=>x.content.toLowerCase().includes(v)));
}

function load(c){
 current=data[c];
 render(current);
}

function showTab(t,btn){
 tab=t;
 document.querySelectorAll("#tabs button").forEach(b=>b.classList.remove("active"));
 btn.classList.add("active");
 if(t==="fav") render(favoris);
 else load(cat.value);
}

function render(list){
 listDiv=document.getElementById("list");
 listDiv.innerHTML="";
 list.forEach(i=>{
  let h=`<div class="card">`;
  if(i.type=="text")h+=`<p>${i.content}</p>`;
  if(i.type=="image")h+=`<img src="${i.content}">`;
  if(i.type=="video")h+=`<video controls src="${i.content}"></video>`;
  h+=`<div class="actions">
    <button onclick="copy('${i.content}')">üìã</button>
    <button onclick="addFav('${i.type}','${i.content}')">‚ù§Ô∏è</button>
  </div></div>`;
  listDiv.innerHTML+=h;
 });
}

function copy(t){
 navigator.clipboard.writeText(t);
 alert("Copi√© ‚úÖ");
}

function addFav(type,content){
 if(!favoris.find(f=>f.content===content)){
  favoris.push({type,content});
  localStorage.setItem("fav",JSON.stringify(favoris));
  alert("Ajout√© aux favoris ‚ù§Ô∏è");
 }
}
</script>

</body>
</html>
